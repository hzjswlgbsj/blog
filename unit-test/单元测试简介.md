### 为什么要写测试？

- 提高开发效率
- 一步到位直接调试写的函数

### 单元测试的好处

- 新增功能 & 修改 bug
  - 新增代码会不会对老代码造成影响
  - 修改 bug 会不会增加新的 bug
- 重构，改善代码
  - 重构很有必要，但是老代码不敢动
- check 别人提交 的代码

- 相当于一份可执行的文档，单元测试很明确的支出输入和输出，阅读单元测试就能知道这个功能点是什么
- 帮助阅读项目源码
- 改善程序设计，如果你程序设计的不好，单元测试你也不好写

### 自动化思维的体现

- 添加新功能后
  - 每次写完一个功能后都要自己去测试一遍功能，有没有影响到其他功能自己也不是很确定，这时候就要依赖测试同学了。
  - 并且每次测试一个功能都要通过 UI 层去手动点击，很浪费时间，也很花时间。
  - 但是如果有单元测试脚本的话，每次有新改动都可以执行一遍，主要的功能写成单元测试后，永远都可以被执行，一劳永逸。
- 改 bug 的时候，调试 bug 和寻找 bug
  - 需要不断地打断点，打 console，然后一遍又一遍的刷新浏览器
  - 但是有单元测试的话，更新前就能发现问题，并且根据编辑器的一些提示，能更快的定位到错误点

### 单元测试的定义

有两个问题：

1. 私有的方法没有被导出，应该怎么测试？
2. 一个测试对应一个函数，当业务逻辑的实现结构发生改变的时候，就需要改变测试的结构

这是传统的测试 **单元**，他存在如上的问题，应用如何解决问题呢？

我们可以以 **功能** 为位单元做测试，比如，我们要测试一个 `todolist` 的 `add` 方法，那我们不用管 `add` 内部有多少个子方法，我们就只测试 add 的输入和输出。我们的目标是保证 add 的添加动作是没有错误的，至于里面未来发生了什么样的改变我们不需要关心，当然也就没有私有方法无法被测试的问题了。

以「功能」为单元的话可以遵循如下原则：

- 一个功能中可以包含一个或者多个函数
- 一个功能中可以包含一个或者多个子功能

### 单元测试顺序

- 补
  - 写功能实现 -> 手动验证/调试 -> 写测试、自动化验证调试
- 后
  - 写功能实现 -> 手动验证/调试 -> 写测试、自动化验证调试
- 前
  - 写测试、自动化验证调试 -> 写功能实现（TDD，测试驱动）

### TDD

1. 先写一个报错的测试
2. 根据报错信息，写代码解决这个报错
3. 执行所有的单元测试

### 不写测试的原因

1. 时间不够
2. 功能测试是同时的事情，跟我无关
3. 不知道写测试的好处
4. 项目没有要求写测试
5. 写了很多错误的不可维护的测试，反而降低的效率，对测试失去信心
6. 不知道如何写测试
